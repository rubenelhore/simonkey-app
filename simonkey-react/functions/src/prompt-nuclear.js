// SOLUCI√ìN NUCLEAR: Prompts espec√≠ficos por idioma

const getEnglishPrompt = () => `
üö®üö®üö® CRITICAL INSTRUCTION - ENGLISH DOCUMENT DETECTED üö®üö®üö®

**DOCUMENT IS IN ENGLISH**
**YOU MUST RESPOND ONLY IN ENGLISH**
**ABSOLUTELY NO TRANSLATION TO ANY OTHER LANGUAGE**

‚ö†Ô∏è CRITICAL WARNING: **NEVER TRANSLATE ANYTHING** - KEEP EVERYTHING IN ENGLISH ‚ö†Ô∏è

You are an expert creating effective study flashcards. Analyze the document and extract key concepts.
**IMPORTANT: YOU MUST KEEP EVERYTHING IN ENGLISH. DO NOT TRANSLATE.**

## EXTRACTION RULES

1. **Discard questions**
   - Ignore any line containing "?" 
   - Ignore phrases starting with interrogative words (what, which, who, where, when, why, how).

2. **Identify the answer** (concept) and its brief explanation.

3. **Length limits**
   - **Term** ‚â§ 50 characters, no punctuation except accents.
   - **Definition** ‚â§ 200 characters, clear and concise.
   - If explanation exceeds limit, simplify while preserving meaning.

4. **Term-definition independence**
   - Term should not appear in definition and vice versa.

5. **Remove duplicates**
   - At the end, analyze the JSON. REMOVE cards with same term or definition.

6. **LANGUAGE: ENGLISH - NEVER TRANSLATE**
   - üö´ **TRANSLATION FORBIDDEN** üö´
   - **DOCUMENT IS IN ENGLISH**
   - **YOUR CONCEPTS MUST BE IN ENGLISH**
   - **NEVER TRANSLATE THE CONCEPTS**
   - **ALWAYS KEEP ENGLISH**
   - **DO NOT TRANSLATE** to any other language
   - **DOCUMENT = ENGLISH ‚Üí RESPONSE = ENGLISH**
   - **REPEAT: TRANSLATION IS STRICTLY FORBIDDEN**
   - Terms and definitions MUST be EXACTLY in ENGLISH
   - **DO NOT CHANGE LANGUAGE UNDER ANY CIRCUMSTANCES**
   - **RESPOND IN ENGLISH ONLY**

## RESPONSE FORMAT:
Respond ONLY with this valid JSON:

{
  "conceptos": [
    {
      "termino": "Simple concept name IN ENGLISH",
      "definicion": "Clear and concise explanation IN ENGLISH"
    }
  ]
}

üö´ FINAL REMINDER: **DO NOT TRANSLATE ANYTHING** üö´
- Document is in English ‚Üí respond in English
- **NEVER CHANGE THE DOCUMENT'S ORIGINAL LANGUAGE**

EXAMPLES OF CORRECT FORMAT:
{
  "conceptos": [
    {
      "termino": "Photosynthesis",
      "definicion": "Process by which plants convert light energy into chemical energy"
    },
    {
      "termino": "Democracy",
      "definicion": "System of government where power is vested in the people"
    }
  ]
}
`;

const getSpanishPrompt = () => `
üö®üö®üö® INSTRUCCI√ìN CR√çTICA - DOCUMENTO EN ESPA√ëOL DETECTADO üö®üö®üö®

**EL DOCUMENTO EST√Å EN ESPA√ëOL**
**DEBES RESPONDER √öNICAMENTE EN ESPA√ëOL**
**PROHIBIDO TRADUCIR A CUALQUIER OTRO IDIOMA**

‚ö†Ô∏è ADVERTENCIA CR√çTICA: **NUNCA TRADUZCAS NADA** - MANT√âN TODO EN ESPA√ëOL ‚ö†Ô∏è

Eres un experto creando tarjetas de estudio efectivas. Analiza el documento y extrae los conceptos clave.
**IMPORTANTE: DEBES MANTENER TODO EN ESPA√ëOL. NO TRADUZCAS.**

## REGLAS DE EXTRACCI√ìN

1. **Descarta las preguntas**
   - Ignora cualquier l√≠nea que contenga "¬ø" o "?"
   - Ignora frases que empiecen con palabras interrogativas.

2. **Identifica la respuesta** (concepto) y su explicaci√≥n breve.

3. **L√≠mites de longitud**
   - **T√©rmino** ‚â§ 50 caracteres, sin signos de puntuaci√≥n salvo tildes.
   - **Definici√≥n** ‚â§ 200 caracteres, clara y concisa.

4. **Independencia t√©rmino‚Äëdefinici√≥n**
   - El t√©rmino no debe aparecer en la definici√≥n ni la definici√≥n en el t√©rmino.

5. **Elimina duplicados y cruces**
   - Al finalizar, analiza el json. ELIMINA las tarjetas que tengan el mismo t√©rmino o definici√≥n.

6. **IDIOMA: ESPA√ëOL - NUNCA TRADUCIR**
   - üö´ **PROHIBIDO TRADUCIR** üö´
   - **EL DOCUMENTO EST√Å EN ESPA√ëOL**
   - **TUS CONCEPTOS DEBEN ESTAR EN ESPA√ëOL**
   - **RESPONDE EN ESPA√ëOL √öNICAMENTE**

## FORMATO DE RESPUESTA:
Responde √öNICAMENTE con este JSON v√°lido:

{
  "conceptos": [
    {
      "termino": "Nombre del concepto EN ESPA√ëOL",
      "definicion": "Explicaci√≥n clara y concisa EN ESPA√ëOL"
    }
  ]
}

üö´ RECORDATORIO FINAL: **NO TRADUZCAS NADA** üö´
- El documento est√° en espa√±ol ‚Üí responde en espa√±ol
- **NUNCA CAMBIES EL IDIOMA DEL DOCUMENTO ORIGINAL**
`;

const getItalianPrompt = () => `
üö®üö®üö® ISTRUZIONE CRITICA - DOCUMENTO ITALIANO RILEVATO üö®üö®üö®

**IL DOCUMENTO √à IN ITALIANO**
**DEVI RISPONDERE SOLO IN ITALIANO**
**ASSOLUTAMENTE NESSUNA TRADUZIONE IN ALTRE LINGUE**

‚ö†Ô∏è AVVISO CRITICO: **MAI TRADURRE NULLA** - MANTIENI TUTTO IN ITALIANO ‚ö†Ô∏è

Sei un esperto nella creazione di flashcard di studio efficaci. Analizza il documento ed estrai i concetti chiave.
**IMPORTANTE: DEVI MANTENERE TUTTO IN ITALIANO. NON TRADURRE.**

## REGOLE DI ESTRAZIONE

1. **Scarta le domande**
   - Ignora qualsiasi riga contenente "?"
   - Ignora frasi che iniziano con parole interrogative (cosa, quale, chi, dove, quando, perch√©, come).

2. **Identifica la risposta** (concetto) e la sua breve spiegazione.

3. **Limiti di lunghezza**
   - **Termine** ‚â§ 50 caratteri, senza punteggiatura tranne accenti.
   - **Definizione** ‚â§ 200 caratteri, chiara e concisa.
   - Se la spiegazione supera il limite, semplifica preservando il significato.

4. **Indipendenza termine-definizione**
   - Il termine non deve apparire nella definizione e viceversa.

5. **Rimuovi duplicati**
   - Alla fine, analizza il JSON. RIMUOVI le carte con lo stesso termine o definizione.

6. **LINGUA: ITALIANO - MAI TRADURRE**
   - üö´ **TRADUZIONE VIETATA** üö´
   - **IL DOCUMENTO √à IN ITALIANO**
   - **I TUOI CONCETTI DEVONO ESSERE IN ITALIANO**
   - **MAI TRADURRE I CONCETTI**
   - **MANTIENI SEMPRE L'ITALIANO**
   - **NON TRADURRE** in nessun'altra lingua
   - **DOCUMENTO = ITALIANO ‚Üí RISPOSTA = ITALIANO**

## FORMATO DI RISPOSTA:
Rispondi SOLO con questo JSON valido:

{
  "conceptos": [
    {
      "termino": "Nome del concetto IN ITALIANO",
      "definicion": "Spiegazione chiara e concisa IN ITALIANO"
    }
  ]
}

üö´ PROMEMORIA FINALE: **NON TRADURRE NULLA** üö´
- Il documento √® in italiano ‚Üí rispondi in italiano
- **MAI CAMBIARE LA LINGUA ORIGINALE DEL DOCUMENTO**
`;

const getGreekPrompt = () => `
üö®üö®üö® ŒöŒ°ŒôŒ£ŒôŒúŒó ŒüŒîŒóŒìŒôŒë - ŒïŒõŒõŒóŒùŒôŒöŒü ŒïŒìŒìŒ°ŒëŒ¶Œü ŒëŒùŒôŒßŒùŒïŒ•ŒòŒóŒöŒï üö®üö®üö®

**Œ§Œü ŒïŒìŒìŒ°ŒëŒ¶Œü ŒïŒôŒùŒëŒô Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë**
**Œ†Œ°ŒïŒ†ŒïŒô ŒùŒë ŒëŒ†ŒëŒùŒ§ŒóŒ£ŒïŒôŒ£ ŒúŒüŒùŒü Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë**
**ŒëŒ†ŒüŒõŒ•Œ§Œ©Œ£ ŒöŒëŒúŒôŒë ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒ£Œó Œ£Œï ŒëŒõŒõŒó ŒìŒõŒ©Œ£Œ£Œë**

‚ö†Ô∏è ŒöŒ°ŒôŒ£ŒôŒúŒó Œ†Œ°ŒüŒïŒôŒîŒüŒ†ŒüŒôŒóŒ£Œó: **Œ†ŒüŒ§Œï ŒúŒóŒù ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒñŒïŒôŒ£ Œ§ŒôŒ†ŒüŒ§Œë** - ŒöŒ°ŒëŒ§Œë Œ§Œë Œ†ŒëŒùŒ§Œë Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë ‚ö†Ô∏è

ŒïŒØœÉŒ±Œπ ŒµŒπŒ¥ŒπŒ∫œåœÇ œÉœÑŒ∑ Œ¥Œ∑ŒºŒπŒøœÖœÅŒ≥ŒØŒ± Œ±œÄŒøœÑŒµŒªŒµœÉŒºŒ±œÑŒπŒ∫œéŒΩ Œ∫Œ±œÅœÑœéŒΩ ŒºŒµŒªŒ≠œÑŒ∑œÇ. ŒëŒΩŒ¨ŒªœÖœÉŒµ œÑŒø Œ≠Œ≥Œ≥œÅŒ±œÜŒø Œ∫Œ±Œπ ŒµŒæŒ¨Œ≥Œ±Œ≥Œµ œÑŒπœÇ Œ≤Œ±œÉŒπŒ∫Œ≠œÇ Œ≠ŒΩŒΩŒøŒπŒµœÇ.
**Œ£ŒóŒúŒëŒùŒ§ŒôŒöŒü: Œ†Œ°ŒïŒ†ŒïŒô ŒùŒë ŒöŒ°ŒëŒ§ŒóŒ£ŒïŒôŒ£ Œ§Œë Œ†ŒëŒùŒ§Œë Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë. ŒúŒóŒù ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒñŒïŒôŒ£.**

## ŒöŒëŒùŒüŒùŒïŒ£ ŒïŒûŒëŒìŒ©ŒìŒóŒ£

1. **ŒëœÄœåœÅœÅŒπœàŒµ œÑŒπœÇ ŒµœÅœâœÑŒÆœÉŒµŒπœÇ**
   - ŒëŒ≥ŒΩœåŒ∑œÉŒµ ŒøœÄŒøŒπŒ±Œ¥ŒÆœÄŒøœÑŒµ Œ≥œÅŒ±ŒºŒºŒÆ œÄŒµœÅŒπŒ≠œáŒµŒπ ";" ŒÆ "?"
   - ŒëŒ≥ŒΩœåŒ∑œÉŒµ œÜœÅŒ¨œÉŒµŒπœÇ œÄŒøœÖ ŒæŒµŒ∫ŒπŒΩŒøœçŒΩ ŒºŒµ ŒµœÅœâœÑŒ∑ŒºŒ±œÑŒπŒ∫Œ≠œÇ ŒªŒ≠ŒæŒµŒπœÇ (œÑŒπ, œÄŒøŒπŒøœÇ, œÄŒøœç, œÄœåœÑŒµ, Œ≥ŒπŒ±œÑŒØ, œÄœéœÇ).

2. **Œ†œÅŒøœÉŒ¥ŒπœåœÅŒπœÉŒµ œÑŒ∑ŒΩ Œ±œÄŒ¨ŒΩœÑŒ∑œÉŒ∑** (Œ≠ŒΩŒΩŒøŒπŒ±) Œ∫Œ±Œπ œÑŒ∑ œÉœçŒΩœÑŒøŒºŒ∑ ŒµŒæŒÆŒ≥Œ∑œÉŒÆ œÑŒ∑œÇ.

3. **ŒåœÅŒπŒ± ŒºŒÆŒ∫ŒøœÖœÇ**
   - **ŒåœÅŒøœÇ** ‚â§ 50 œáŒ±œÅŒ±Œ∫œÑŒÆœÅŒµœÇ, œáœâœÅŒØœÇ œÉŒ∑ŒºŒµŒØŒ± œÉœÑŒØŒæŒ∑œÇ ŒµŒ∫œÑœåœÇ Œ±œÄœå œÑœåŒΩŒøœÖœÇ.
   - **ŒüœÅŒπœÉŒºœåœÇ** ‚â§ 200 œáŒ±œÅŒ±Œ∫œÑŒÆœÅŒµœÇ, œÉŒ±œÜŒÆœÇ Œ∫Œ±Œπ œÉœÖŒΩŒøœÄœÑŒπŒ∫œåœÇ.

4. **ŒëŒΩŒµŒæŒ±œÅœÑŒ∑œÉŒØŒ± œåœÅŒøœÖ-ŒøœÅŒπœÉŒºŒøœç**
   - Œü œåœÅŒøœÇ Œ¥ŒµŒΩ œÄœÅŒ≠œÄŒµŒπ ŒΩŒ± ŒµŒºœÜŒ±ŒΩŒØŒ∂ŒµœÑŒ±Œπ œÉœÑŒøŒΩ ŒøœÅŒπœÉŒºœå Œ∫Œ±Œπ Œ±ŒΩœÑŒØœÉœÑœÅŒøœÜŒ±.

5. **ŒëœÜŒ±ŒØœÅŒµœÉŒµ Œ¥ŒπœÄŒªœåœÑœÖœÄŒ±**
   - Œ£œÑŒø œÑŒ≠ŒªŒøœÇ, Œ±ŒΩŒ¨ŒªœÖœÉŒµ œÑŒø JSON. ŒëŒ¶ŒëŒôŒ°ŒïŒ£Œï Œ∫Œ¨œÅœÑŒµœÇ ŒºŒµ œÑŒøŒΩ ŒØŒ¥ŒπŒø œåœÅŒø ŒÆ ŒøœÅŒπœÉŒºœå.

6. **ŒìŒõŒ©Œ£Œ£Œë: ŒïŒõŒõŒóŒùŒôŒöŒë - Œ†ŒüŒ§Œï ŒúŒóŒù ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒñŒïŒôŒ£**
   - üö´ **ŒëŒ†ŒëŒìŒüŒ°ŒïŒ•ŒïŒ§ŒëŒô Œó ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒ£Œó** üö´
   - **Œ§Œü ŒïŒìŒìŒ°ŒëŒ¶Œü ŒïŒôŒùŒëŒô Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë**
   - **ŒüŒô ŒïŒùŒùŒüŒôŒïŒ£ Œ£ŒüŒ• Œ†Œ°ŒïŒ†ŒïŒô ŒùŒë ŒïŒôŒùŒëŒô Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë**

## ŒúŒüŒ°Œ¶Œó ŒëŒ†ŒëŒùŒ§ŒóŒ£ŒóŒ£:
ŒëœÄŒ¨ŒΩœÑŒ∑œÉŒµ ŒúŒüŒùŒü ŒºŒµ Œ±œÖœÑœå œÑŒø Œ≠Œ≥Œ∫œÖœÅŒø JSON:

{
  "conceptos": [
    {
      "termino": "ŒåŒΩŒøŒºŒ± Œ≠ŒΩŒΩŒøŒπŒ±œÇ Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë",
      "definicion": "Œ£Œ±œÜŒÆœÇ Œ∫Œ±Œπ œÉœÖŒΩŒøœÄœÑŒπŒ∫ŒÆ ŒµŒæŒÆŒ≥Œ∑œÉŒ∑ Œ£Œ§Œë ŒïŒõŒõŒóŒùŒôŒöŒë"
    }
  ]
}

üö´ Œ§ŒïŒõŒôŒöŒó Œ•Œ†ŒïŒùŒòŒ•ŒúŒôŒ£Œó: **ŒúŒóŒù ŒúŒïŒ§ŒëŒ¶Œ°ŒëŒñŒïŒôŒ£ Œ§ŒôŒ†ŒüŒ§Œë** üö´
- Œ§Œø Œ≠Œ≥Œ≥œÅŒ±œÜŒø ŒµŒØŒΩŒ±Œπ œÉœÑŒ± ŒµŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ ‚Üí Œ±œÄŒ¨ŒΩœÑŒ∑œÉŒµ œÉœÑŒ± ŒµŒªŒªŒ∑ŒΩŒπŒ∫Œ¨
- **Œ†ŒüŒ§Œï ŒúŒóŒù ŒëŒõŒõŒëŒñŒïŒôŒ£ Œ§ŒóŒù ŒëŒ°ŒßŒôŒöŒó ŒìŒõŒ©Œ£Œ£Œë Œ§ŒüŒ• ŒïŒìŒìŒ°ŒëŒ¶ŒüŒ•**
`;

const getLatinPrompt = () => `
üö®üö®üö® PRAECEPTUM CRITICUM - DOCUMENTUM LATINUM DETECTUM üö®üö®üö®

**DOCUMENTUM EST LATINE**
**DEBES RESPONDERE SOLUM LATINE**
**NULLO MODO TRANSFERRE IN ALIAM LINGUAM**

‚ö†Ô∏è MONITUM CRITICUM: **NUMQUAM TRANSFERRE QUICQUAM** - SERVA OMNIA LATINE ‚ö†Ô∏è

Peritus es in creandis chartis studiorum efficacibus. Analyza documentum et extrahe conceptus principales.
**GRAVE: DEBES SERVARE OMNIA LATINE. NOLI TRANSFERRE.**

## REGULAE EXTRACTIONIS

1. **Reice quaestiones**
   - Ignora quamlibet lineam continentem "?"
   - Ignora sententias incipientes verbis interrogativis (quid, quis, ubi, quando, cur, quomodo).

2. **Identifica responsum** (conceptum) et eius brevem explicationem.

3. **Limites longitudinis**
   - **Terminus** ‚â§ 50 characteres, sine punctuatione praeter accentus.
   - **Definitio** ‚â§ 200 characteres, clara et concisa.

4. **Independentia termini-definitionis**
   - Terminus non debet apparere in definitione et vice versa.

5. **Remove duplicata**
   - In fine, analyza JSON. REMOVE chartas cum eodem termino vel definitione.

6. **LINGUA: LATINA - NUMQUAM TRANSFERRE**
   - üö´ **TRANSLATIO PROHIBITA** üö´
   - **DOCUMENTUM EST LATINE**
   - **TUI CONCEPTUS DEBENT ESSE LATINE**
   - **SEMPER SERVA LATINUM**

## FORMA RESPONSI:
Responde SOLUM cum hoc valido JSON:

{
  "conceptos": [
    {
      "termino": "Nomen conceptus LATINE",
      "definicion": "Clara et concisa explicatio LATINE"
    }
  ]
}

üö´ MONITUM FINALE: **NOLI TRANSFERRE QUICQUAM** üö´
- Documentum est latine ‚Üí responde latine
- **NUMQUAM MUTA LINGUAM ORIGINALEM DOCUMENTI**
`;

const getPromptByLanguage = (detectedLanguage) => {
  switch(detectedLanguage) {
    case 'english':
      return getEnglishPrompt();
    case 'italian':
      return getItalianPrompt();
    case 'greek':
      return getGreekPrompt();
    case 'latin':
      return getLatinPrompt();
    case 'spanish':
    default:
      return getSpanishPrompt();
  }
};

module.exports = { getPromptByLanguage };